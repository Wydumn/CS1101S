var interpreter=5;var mission_type="sound";var timeout="60000";(function(r){var t={chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encLookup:[],Init:function(){for(var r=0;r<4096;r++){this.encLookup[r]=this.chars[r>>6]+this.chars[r&63]}},Encode:function(r){var t=r.length;var e="";var a=0;while(t>2){n=r[a]<<16|r[a+1]<<8|r[a+2];e+=this.encLookup[n>>12]+this.encLookup[n&4095];t-=3;a+=3}if(t>0){var u=(r[a]&252)>>2;var i=(r[a]&3)<<4;if(t>1)i|=(r[++a]&240)>>4;e+=this.chars[u];e+=this.chars[i];if(t==2){var o=(r[a++]&15)<<2;o|=(r[a]&192)>>6;e+=this.chars[o]}if(t==1)e+="=";e+="="}return e}};t.Init();var e=function(r){this.data=[];this.wav=[];this.dataURI="";this.header={chunkId:[82,73,70,70],chunkSize:0,format:[87,65,86,69],subChunk1Id:[102,109,116,32],subChunk1Size:16,audioFormat:1,numChannels:1,sampleRate:8e3,byteRate:0,blockAlign:0,bitsPerSample:8,subChunk2Id:[100,97,116,97],subChunk2Size:0};function n(r){return[r&255,r>>8&255,r>>16&255,r>>24&255]}function e(r){return[r&255,r>>8&255]}function a(r){var t=[];var n=0;var e=r.length;for(var a=0;a<e;a++){t[n++]=r[a]&255;t[n++]=r[a]>>8&255}return t}this.Make=function(r){if(r instanceof Array)this.data=r;this.header.blockAlign=this.header.numChannels*this.header.bitsPerSample>>3;this.header.byteRate=this.header.blockAlign*this.sampleRate;this.header.subChunk2Size=this.data.length*(this.header.bitsPerSample>>3);this.header.chunkSize=36+this.header.subChunk2Size;this.wav=this.header.chunkId.concat(n(this.header.chunkSize),this.header.format,this.header.subChunk1Id,n(this.header.subChunk1Size),e(this.header.audioFormat),e(this.header.numChannels),n(this.header.sampleRate),n(this.header.byteRate),e(this.header.blockAlign),e(this.header.bitsPerSample),this.header.subChunk2Id,n(this.header.subChunk2Size),this.header.bitsPerSample==16?a(this.data):this.data);this.dataURI="data:audio/wav;base64,"+t.Encode(this.wav)};if(r instanceof Array)this.Make(r)};var a=32e3;function u(r){var t=[];for(var n=r.length-1;n>=0;n--){t=pair(r[n],t)}return t}function i(r){var t=[];while(!is_empty_list(r)){t.push(head(r));r=tail(r)}return t}function o(r){var t=0;while(!is_empty_list(r)){t++;r=tail(r)}return t}function s(r,t){var n=i(r);var e=i(t);var a=n.concat(e);return u(a)}function h(r,t){var n=i(t);for(var e=0;e<n.length;e++){n[e]=r(n[e])}return u(n)}function f(r,t){var n=[];for(var e=0;e<t*a;e++){n.push(r(e/a))}return n}function c(r){for(var t=0;t<r.length;t++){r[t]=Math.round((r[t]+1)*126)}return r}function l(r){for(var t=0;t<r.length;t++){if(r[t]>1)r[t]=1;if(r[t]<-1)r[t]=-1}var n=0;for(var t=0;t<r.length;t++){if(Math.abs(n-r[t])>.01&&r[t]==0){r[t]=n*.999}n=r[t]}return r}function d(r){var t=[];for(var n=0;n<r.length;n++){t[n]=r[n]}return t}function v(r){data=d(r);data=l(data);data=c(data);var t=new e;t.header.sampleRate=a;t.header.numChannels=1;t.Make(data);var n=new Audio(t.dataURI);return n}function p(r,t){return pair(r,t)}function b(r){return head(r)}function _(r){return tail(r)}function m(r){return is_pair(r)&&head(r)==="sound"}var k=false;var y=null;function g(r){if(k)return;if(!m(r)){throw new Error("play() expects sound as input, did you forget to sourcesound_to_sound()?")}var t=tail(r);y=v(t);y.addEventListener("ended",w);y.play();k=true}function w(){if(k){y.pause();delete y}k=false}function M(r,t){var n=b(r);return p(function(r){if(r>=t){return 0}else{return n(r)}},t)}function I(r,t){var n=tail(r);var e=[];for(var u=0;u<a*t;u++){e[u]=n[u]}return e}function x(r){return M(r,_(r))}function S(r){var t=_(r);var n=b(r);var e=f(n,t);var a=pair("sound",e);a.toString=function(){return"[object Sound]"};return a}function C(r){if(!m(r)){throw new Error("sound_to_sourcesound() expects sound as input, did you forget to sourcesound_to_sound()?")}var t=tail(r);var n=t.length/a;return x(p(function(r){var n=r*a;var e=Math.floor(n);var u=e+1;var i=n-e;var o=t[u]?t[u]:0;var s=t[e]?t[e]:0;return s*(1-i)+o*i},n))}function P(r){return pair("sound",accumulate(function(r,t){return r.concat(t)},[],h(tail,r)))}function R(r){if(false){debugger}var t=i(h(tail,r));var n=0;var e;var a=[];for(e=0;e<t.length;e++){n=Math.max(n,t[e].length)}for(e=0;e<n;e++){a[e]=0;for(var u=0;u<t.length;u++){var o=t[u][e];a[e]+=o?o:0}a[e]/=t.length}return pair("sound",a)}function z(r){return x(p(function(r){return Math.random()*2-1},r))}function A(r){return S(z(r))}function E(r,t){return x(p(function(t){return Math.sin(2*Math.PI*t*r)},t))}function L(r,t){return S(E(r,t))}function U(r,t){return x(p(function(r){return 0},t))}function q(r){return U(0,r)}function F(r){return U(1,r)}function j(r){return S(q(r))}function B(r){return S(F(r))}function D(r){var t=b(r);var n=_(r);return p(function(r){return-t(r)},n)}function G(r){var t=[];var n=tail(r);for(var e=0;e<n.length;e++){t[e]=-n[e]}return t}function H(r){var t=b(r);var n=_(r);return p(function(r){var n=t(r);if(n>1){return 1}else if(n<-1){return-1}else{return n}},n)}function J(r){var t=[];var n=tail(r);for(var e=0;e<n.length;e++){if(t[e]>1){return 1}else if(t[e]<-1){return-1}else{return t[e]}}return t}function K(r){var r=r.split("");var t=12;var n=r[0].toUpperCase();switch(n){case"D":t=t+2;break;case"E":t=t+4;break;case"F":t=t+5;break;case"G":t=t+7;break;case"A":t=t+9;break;case"B":t=t+11;break;default:break}if(r.length===2){t=parseInt(r[1])*12+t}else if(r.length===3){switch(r[1]){case"#":t=t+1;break;case"b":t=t-1;break;default:break}t=parseInt(r[2])*12+t}return t}function N(r){return O(note_to_midi_note(r))}function O(r){return 8.1757989156*Math.pow(2,r/12)}function Q(r,t){function n(t,n){var e=0;for(var a=1;a<=t;a++){e=e+Math.sin(2*Math.PI*(2*a-1)*r*n)/(2*a-1)}return e}return x(p(function(r){var t=4/Math.PI*n(5,r);if(t>1){return 1}else if(t<-1){return-1}else{return t}},t))}function T(r,t){return S(Q(r,t))}function V(r,t){function n(t,n){var e=0;for(var a=0;a<t;a++){e=e+Math.pow(-1,a)*Math.sin((2*a+1)*n*r*Math.PI*2)/Math.pow(2*a+1,2)}return e}return x(p(function(r){var t=8/Math.PI/Math.PI*n(5,r);if(t>1){return 1}else if(t<-1){return-1}else{return t}},t))}function W(r,t){return S(V(r,t))}function X(r,t){function n(t,n){var e=0;for(var a=1;a<=t;a++){e=e+Math.sin(2*Math.PI*a*r*n)/a}return e}return x(p(function(r){var t=1/2-1/Math.PI*n(5,r);if(t>1){return 1}else if(t<-1){return-1}else{return t}},t))}function Y(r,t){return S(X(r,t))}function Z(r){if(!m(r)){throw new"play() expects sound as input, did you forget to sourcesound_to_sound()?"}var t=tail(r);var n=v(t);n.play()}export_symbol("make_sourcesound",p);export_symbol("get_wave",b);export_symbol("get_duration",_);export_symbol("play",g);export_symbol("sound_to_sourcesound",C);export_symbol("sourcesound_to_sound",S);export_symbol("consecutively",P);export_symbol("simultaneously",R);export_symbol("sine_sound",L);export_symbol("sawtooth_sound",Y);export_symbol("triangle_sound",W);export_symbol("square_sound",T);export_symbol("midi_note_to_frequency",O);export_symbol("letter_name_to_midi_note",K);export_symbol("letter_name_to_frequency",N)})(window);